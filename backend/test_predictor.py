import predictor

DATA_PREDICT_SINGLE = [
    {
        "input": {
            "engine_capacity": 1392.0,
            "vehicle_type": 9.0,
            "age_of_driver": 59.0,
            "longitude": -1.455565,
            "latitude": 53.419588,
            "cluster_1": 13739.0,
            "day_of_year": 241.0,
            "rltv_hum": 60.5,
            "air_temperature": 12.2,
            "hour": 20.0,
            "wind_speed": 0.0,
            "wind_direction": 0.0,
            "ground_state_id": 1.0,
            "cld_ttl_amt_id": 8.0,
            "dewpoint": 4.8,
            "age_of_vehicle": 13.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 1744.0,
            "vehicle_type": 19.0,
            "age_of_driver": 11.0,
            "longitude": -2.1692720000000003,
            "latitude": 53.38852900000001,
            "cluster_1": 34395.0,
            "day_of_year": 57.0,
            "rltv_hum": 84.4,
            "air_temperature": 5.9,
            "hour": 2.0,
            "wind_speed": 8.0,
            "wind_direction": 270.0,
            "ground_state_id": 9.966551125033217,
            "cld_ttl_amt_id": 7.0,
            "dewpoint": 3.6,
            "age_of_vehicle": 6.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 1390.0,
            "vehicle_type": 9.0,
            "age_of_driver": 35.0,
            "longitude": -2.241664,
            "latitude": 53.48017900000001,
            "cluster_1": 8191.0,
            "day_of_year": 177.0,
            "rltv_hum": 54.8,
            "air_temperature": 23.6,
            "hour": 12.0,
            "wind_speed": 5.0,
            "wind_direction": 180.0,
            "ground_state_id": 8.176260096454872,
            "cld_ttl_amt_id": 7.831439371260178,
            "dewpoint": 13.9,
            "age_of_vehicle": 1.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 1956.0,
            "vehicle_type": 5.0,
            "age_of_driver": 50.0,
            "longitude": 0.0583039999999999,
            "latitude": 51.424728,
            "cluster_1": 2807.0,
            "day_of_year": 279.0,
            "rltv_hum": 88.56096524245338,
            "air_temperature": 10.3577543083368,
            "hour": 18.0,
            "wind_speed": 9.843864549005671,
            "wind_direction": 200.4743600833488,
            "ground_state_id": 8.210765264097635,
            "cld_ttl_amt_id": 4.203921240172061,
            "dewpoint": 8.502209886384929,
            "age_of_vehicle": 3.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 2874.0,
            "vehicle_type": 97.0,
            "age_of_driver": 85.0,
            "longitude": -4.063975,
            "latitude": 51.745943,
            "cluster_1": 30490.0,
            "day_of_year": 253.0,
            "rltv_hum": 87.0261407862686,
            "air_temperature": 12.184421361821089,
            "hour": 0.0,
            "wind_speed": 11.420052637691073,
            "wind_direction": 284.3071154498698,
            "ground_state_id": 6.419856561631128,
            "cld_ttl_amt_id": 5.746491433834152,
            "dewpoint": 10.080334173204918,
            "age_of_vehicle": 9.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 998.0,
            "vehicle_type": 9.0,
            "age_of_driver": 31.0,
            "longitude": -1.473296,
            "latitude": 53.360611,
            "cluster_1": 13918.0,
            "day_of_year": 8.0,
            "rltv_hum": 88.8377407400786,
            "air_temperature": 3.2949558298532224,
            "hour": 15.0,
            "wind_speed": 14.14297256757894,
            "wind_direction": 237.7385265022501,
            "ground_state_id": 7.5005474860081875,
            "cld_ttl_amt_id": 1.9502493329114023,
            "dewpoint": 1.85042637713887,
            "age_of_vehicle": 1.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 1590.0,
            "vehicle_type": 9.0,
            "age_of_driver": 35.0,
            "longitude": 1.374845,
            "latitude": 52.110725,
            "cluster_1": 45579.0,
            "day_of_year": 218.0,
            "rltv_hum": 95.83669498187136,
            "air_temperature": 12.266297941121294,
            "hour": 8.0,
            "wind_speed": 7.780123710899737,
            "wind_direction": 213.81626715911784,
            "ground_state_id": 9.967634830696698,
            "cld_ttl_amt_id": 4.3709437579045325,
            "dewpoint": 11.606113632839286,
            "age_of_vehicle": 4.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 119.0,
            "vehicle_type": 16.0,
            "age_of_driver": 38.0,
            "longitude": -0.123377,
            "latitude": 51.568425,
            "cluster_1": 702.0,
            "day_of_year": 162.0,
            "rltv_hum": 90.64590909809972,
            "air_temperature": 12.769869275059474,
            "hour": 12.0,
            "wind_speed": 13.756562992182474,
            "wind_direction": 284.80586209579826,
            "ground_state_id": 8.207510692559932,
            "cld_ttl_amt_id": 7.975361195598447,
            "dewpoint": 11.229344165785873,
            "age_of_vehicle": 12.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 1679.0,
            "vehicle_type": 9.0,
            "age_of_driver": 37.0,
            "longitude": -2.004398,
            "latitude": 52.614487,
            "cluster_1": 15789.0,
            "day_of_year": 321.0,
            "rltv_hum": 98.6,
            "air_temperature": 9.2,
            "hour": 10.0,
            "wind_speed": 8.49402355148263,
            "wind_direction": 160.42358534409078,
            "ground_state_id": 6.419978990211779,
            "cld_ttl_amt_id": 7.985854669166286,
            "dewpoint": 9.0,
            "age_of_vehicle": 12.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 4500.0,
            "vehicle_type": 11.0,
            "age_of_driver": 31.0,
            "longitude": -0.032725,
            "latitude": 51.512354,
            "cluster_1": 1260.0,
            "day_of_year": 221.0,
            "rltv_hum": 86.37605790376345,
            "air_temperature": 13.867414440678287,
            "hour": 10.0,
            "wind_speed": 11.617130181223626,
            "wind_direction": 285.7957272688244,
            "ground_state_id": 6.419978632409288,
            "cld_ttl_amt_id": 7.8225460874931825,
            "dewpoint": 11.561639603326444,
            "age_of_vehicle": 4.0,
        },
        "accident": 1.0,
    },
]


DATA_PREDICT_SET = [
    {
        "input": {
            "engine_capacity": 1392.0,
            "vehicle_type": 9.0,
            "age_of_driver": 59.0,
            "longitude": -1.455565,
            "latitude": 53.419588,
            "cluster_1": 13739.0,
            "day_of_year": 241.0,
            "rltv_hum": 60.5,
            "air_temperature": 12.2,
            "hour": 20.0,
            "wind_speed": 0.0,
            "wind_direction": 0.0,
            "ground_state_id": 1.0,
            "cld_ttl_amt_id": 8.0,
            "dewpoint": 4.8,
            "age_of_vehicle": 13.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 1744.0,
            "vehicle_type": 19.0,
            "age_of_driver": 11.0,
            "longitude": -2.1692720000000003,
            "latitude": 53.38852900000001,
            "cluster_1": 34395.0,
            "day_of_year": 57.0,
            "rltv_hum": 84.4,
            "air_temperature": 5.9,
            "hour": 2.0,
            "wind_speed": 8.0,
            "wind_direction": 270.0,
            "ground_state_id": 9.966551125033217,
            "cld_ttl_amt_id": 7.0,
            "dewpoint": 3.6,
            "age_of_vehicle": 6.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 1390.0,
            "vehicle_type": 9.0,
            "age_of_driver": 35.0,
            "longitude": -2.241664,
            "latitude": 53.48017900000001,
            "cluster_1": 8191.0,
            "day_of_year": 177.0,
            "rltv_hum": 54.8,
            "air_temperature": 23.6,
            "hour": 12.0,
            "wind_speed": 5.0,
            "wind_direction": 180.0,
            "ground_state_id": 8.176260096454872,
            "cld_ttl_amt_id": 7.831439371260178,
            "dewpoint": 13.9,
            "age_of_vehicle": 1.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 1956.0,
            "vehicle_type": 5.0,
            "age_of_driver": 50.0,
            "longitude": 0.0583039999999999,
            "latitude": 51.424728,
            "cluster_1": 2807.0,
            "day_of_year": 279.0,
            "rltv_hum": 88.56096524245338,
            "air_temperature": 10.3577543083368,
            "hour": 18.0,
            "wind_speed": 9.843864549005671,
            "wind_direction": 200.4743600833488,
            "ground_state_id": 8.210765264097635,
            "cld_ttl_amt_id": 4.203921240172061,
            "dewpoint": 8.502209886384929,
            "age_of_vehicle": 3.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 2874.0,
            "vehicle_type": 97.0,
            "age_of_driver": 85.0,
            "longitude": -4.063975,
            "latitude": 51.745943,
            "cluster_1": 30490.0,
            "day_of_year": 253.0,
            "rltv_hum": 87.0261407862686,
            "air_temperature": 12.184421361821089,
            "hour": 0.0,
            "wind_speed": 11.420052637691073,
            "wind_direction": 284.3071154498698,
            "ground_state_id": 6.419856561631128,
            "cld_ttl_amt_id": 5.746491433834152,
            "dewpoint": 10.080334173204918,
            "age_of_vehicle": 9.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 998.0,
            "vehicle_type": 9.0,
            "age_of_driver": 31.0,
            "longitude": -1.473296,
            "latitude": 53.360611,
            "cluster_1": 13918.0,
            "day_of_year": 8.0,
            "rltv_hum": 88.8377407400786,
            "air_temperature": 3.2949558298532224,
            "hour": 15.0,
            "wind_speed": 14.14297256757894,
            "wind_direction": 237.7385265022501,
            "ground_state_id": 7.5005474860081875,
            "cld_ttl_amt_id": 1.9502493329114023,
            "dewpoint": 1.85042637713887,
            "age_of_vehicle": 1.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 1590.0,
            "vehicle_type": 9.0,
            "age_of_driver": 35.0,
            "longitude": 1.374845,
            "latitude": 52.110725,
            "cluster_1": 45579.0,
            "day_of_year": 218.0,
            "rltv_hum": 95.83669498187136,
            "air_temperature": 12.266297941121294,
            "hour": 8.0,
            "wind_speed": 7.780123710899737,
            "wind_direction": 213.81626715911784,
            "ground_state_id": 9.967634830696698,
            "cld_ttl_amt_id": 4.3709437579045325,
            "dewpoint": 11.606113632839286,
            "age_of_vehicle": 4.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 119.0,
            "vehicle_type": 16.0,
            "age_of_driver": 38.0,
            "longitude": -0.123377,
            "latitude": 51.568425,
            "cluster_1": 702.0,
            "day_of_year": 162.0,
            "rltv_hum": 90.64590909809972,
            "air_temperature": 12.769869275059474,
            "hour": 12.0,
            "wind_speed": 13.756562992182474,
            "wind_direction": 284.80586209579826,
            "ground_state_id": 8.207510692559932,
            "cld_ttl_amt_id": 7.975361195598447,
            "dewpoint": 11.229344165785873,
            "age_of_vehicle": 12.0,
        },
        "accident": 0.0,
    },
    {
        "input": {
            "engine_capacity": 1679.0,
            "vehicle_type": 9.0,
            "age_of_driver": 37.0,
            "longitude": -2.004398,
            "latitude": 52.614487,
            "cluster_1": 15789.0,
            "day_of_year": 321.0,
            "rltv_hum": 98.6,
            "air_temperature": 9.2,
            "hour": 10.0,
            "wind_speed": 8.49402355148263,
            "wind_direction": 160.42358534409078,
            "ground_state_id": 6.419978990211779,
            "cld_ttl_amt_id": 7.985854669166286,
            "dewpoint": 9.0,
            "age_of_vehicle": 12.0,
        },
        "accident": 1.0,
    },
    {
        "input": {
            "engine_capacity": 4500.0,
            "vehicle_type": 11.0,
            "age_of_driver": 31.0,
            "longitude": -0.032725,
            "latitude": 51.512354,
            "cluster_1": 1260.0,
            "day_of_year": 221.0,
            "rltv_hum": 86.37605790376345,
            "air_temperature": 13.867414440678287,
            "hour": 10.0,
            "wind_speed": 11.617130181223626,
            "wind_direction": 285.7957272688244,
            "ground_state_id": 6.419978632409288,
            "cld_ttl_amt_id": 7.8225460874931825,
            "dewpoint": 11.561639603326444,
            "age_of_vehicle": 4.0,
        },
        "accident": 1.0,
    },
]

def test_prediction():
    print("Start Test")
    
    total = 0
    correct = 0

    for data in DATA_PREDICT_SINGLE:
        total += 1

        predicted = predictor.predict_single(data['input'])
        actual = bool(data['accident'])

        print("{0}\t{1}\t{2}".format(total,predicted, actual))

        if predicted == actual:
            correct += 1
        
        
    # check for >90% accuracy
    assert (correct / total) > .9


